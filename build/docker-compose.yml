version: "3.0"
services:
  nlu:
    build: ./docker/nlu
    image: mcleonte/zaida-nlu
    container_name: zaida-nlu
    user: 1000:1000
    ports:
      - 5005:5005
    volumes:
      - ./docker/nlu:/app
    command:
      - run
    environment:
      - SQLALCHEMY_SILENCE_UBER_WARNING=1

  nlu-actions:
    build: ./docker/nlu-actions
    image: mcleonte/zaida-nlu-actions
    container_name: zaida-nlu-actions
    expose:
      - 5055
    volumes:
      - ./docker/nlu-actions:/app/actions
      - /etc/localtime:/etc/localtime

  stt:
    image: alphacep/kaldi-en:latest
    container_name: zaida-stt
    ports:
      - 2700:2700
    volumes:
      - ./docker/stt/model:/opt/vosk-model-en/model

  tts:
    build: ./docker/tts
    image: mcleonte/zaida-tts
    container_name: zaida-tts
    ports:
      - 59125:59125
    volumes:
      - ./docker/tts/:/home/mimic3/.local/share/mycroft/mimic3
