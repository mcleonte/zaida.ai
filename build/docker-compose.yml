version: "3.0"
services:
  rasa:
    # image: rasa/rasa:3.4.2-full
    build: ./docker/rasa
    image: mcleonte/zaida-rasa
    container_name: zaida-rasa
    user: 1000:1000
    ports:
      - 5005:5005
    volumes:
      - ./docker/rasa:/app
    command:
      - run
    environment:
      - SQLALCHEMY_SILENCE_UBER_WARNING=1

  actions:
    # image: mcleonte/rasa-actions
    build: ./docker/actions
    image: mcleonte/zaida-actions
    container_name: zaida-actions
    expose:
      - 5055
    volumes:
      - ./docker/actions:/app/actions
      - /etc/localtime:/etc/localtime

  stt:
    image: alphacep/kaldi-en:latest
    container_name: zaida-stt
    ports:
      - 2700:2700
    volumes:
      - ./docker/stt/model:/opt/vosk-model-en/model
